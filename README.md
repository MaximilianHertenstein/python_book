# Python Book

A Python learning book built with mdBook, interactive quizzes, and Thebe for live code execution.

**ðŸ“– View the book:** https://maximilianhertenstein.github.io/python_book/

## Setup

This project uses:
- **mdBook v0.4.45** - for building the book
- **mdbook-quiz v0.4.0** - for interactive quiz support
- **Thebe v0.5.0** - for interactive Python code execution

## Important: Version Compatibility

**mdbook-quiz v0.4.0 requires mdBook v0.4.45**, not the latest v0.5.x. This is a known incompatibility - see [mdbook-quiz issue #61](https://github.com/cognitive-engineering-lab/mdbook-quiz/issues/61).

### Installation

Install the required versions:

```bash
# Install mdBook v0.4.45
cargo install mdbook --version 0.4.45 --locked

# Install mdbook-quiz v0.4.0
cargo install mdbook-quiz --version 0.4.0 --locked

# Install mdbook-admonish v1.20.0
cargo install mdbook-admonish --version 1.20.0 --locked
```

### NPM Dependencies

Install the Node.js dependencies for Thebe support:

```bash
npm install
```

Then copy the Thebe build artifacts to the project:

```bash
npx copy-thebe-assets src/thebe
```

This needs to be done once during setup and again if you update Thebe packages.

## Building

To build the book, use either:

```bash
# Using npm
npm run build

# Or directly with mdbook
mdbook build
```

To serve the book locally with live reload:

```bash
# Using npm
npm run serve

# Or directly with mdbook
mdbook serve
```

The built book will be in the `book/` directory.

## Interactive Code Execution

Code blocks marked with the `python` language tag are automatically made executable via Thebe:

````markdown
```python
print("Hello, Python!")
```
````

Click the rocket button (centered at the top) to activate Thebe and run code interactively.

## Project Structure

```
src/
â”œâ”€â”€ chapter_1.md      # Chapter 1 with example quiz
â”œâ”€â”€ chapter_2.md      # Chapter 2
â”œâ”€â”€ SUMMARY.md        # Table of contents
â”œâ”€â”€ header.hbs        # Header template
â”œâ”€â”€ head.hbs          # Head template
â”œâ”€â”€ quizzes/
â”‚   â””â”€â”€ python-basics.toml  # Example quiz file
â”œâ”€â”€ quiz/             # Quiz UI assets (generated by mdbook-quiz)
â”œâ”€â”€ thebe/            # Thebe assets (for interactive code execution)
â””â”€â”€ book_theme/       # Custom mdBook theme
    â”œâ”€â”€ additional.css    # Custom styling
    â”œâ”€â”€ head.hbs          # Theme head template
    â””â”€â”€ header.hbs        # Theme header with Thebe status element
```

## Styling

The custom theme in `src/book_theme/additional.css` includes:
- Centered Thebe activate button
- Hidden Thebe control buttons (run all, restart, etc.)
- Custom CodeMirror styling (no line numbers shown)

## Quizzes

Quizzes are stored in `src/quizzes/` as TOML files and referenced in markdown using `{{#quiz filename.toml}}`. See the [mdbook-quiz documentation](https://github.com/cognitive-engineering-lab/mdbook-quiz) for quiz format and available question types.

## Admonitions

This book uses [mdbook-admonish](https://github.com/tommilligan/mdbook-admonish) to add callout boxes. Use the syntax `> [!TYPE]` where TYPE is NOTE, WARNING, TIP, etc. See the [mdbook-admonish documentation](https://github.com/tommilligan/mdbook-admonish) for available admonition types.

## Thebe (Interactive Code Execution)

This book supports interactive Python code execution through [Thebe](https://thebe.readthedocs.io/). Code blocks in the book can be executed directly in the browser.

### Thebe Setup



**If you've modified Thebe packages**, rebuild the assets:

```bash
npx copy-thebe-assets src/thebe
```

Then rebuild the book:

```bash
npm run build
```

## GitHub Actions / CI/CD Setup

To build this book in GitHub Actions or other CI/CD systems, you need to install both mdBook and mdbook-quiz.

### GitHub Actions Workflow Example

Add this to your `.github/workflows/build.yml`:

```yaml
name: Build Book

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Install Rust
      uses: actions-rs/toolchain@v1
      with:
        toolchain: stable
    
    - name: Install mdBook
      run: cargo install mdbook --version 0.4.52 --locked
    
    - name: Install mdbook-quiz
      run: cargo install mdbook-quiz --locked
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install npm dependencies
      run: npm install
    
    - name: Copy Thebe assets
      run: npx copy-thebe-assets book/thebe
    
    - name: Build book
      run: npm run build
    
    - name: Upload artifact
      uses: actions/upload-pages-artifact@v2
      with:
        path: 'book'
```

**Key steps:**
- Install mdBook v0.4.45 (not the latest version)
- Install mdbook-quiz
- Install npm dependencies
- Copy Thebe assets
- Build the book

